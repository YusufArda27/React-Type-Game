{"ast":null,"code":"import _classCallCheck from \"/home/yusard/typing-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/yusard/typing-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/yusard/typing-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/yusard/typing-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/yusard/typing-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/yusard/typing-test/src/App.js\";\nimport React, { Component } from 'react';\nimport Preview from './Preview';\nimport Speed from './Speed';\nimport getText from './getText';\nvar initialState = {\n  text: getText(),\n  userInput: '',\n  symbols: 0,\n  sec: 0,\n  started: false,\n  finished: false\n};\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = initialState;\n\n    _this.onRestart = function () {\n      _this.setState(initialState);\n    };\n\n    _this.onUserInputChange = function (e) {\n      var v = e.target.value;\n\n      _this.setTimer();\n\n      _this.onFinish(v);\n\n      _this.setState({\n        userInput: v,\n        symbols: _this.countCorrectSymbols(v)\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"onFinish\",\n    value: function onFinish(userInput) {\n      if (userInput === this.state.text) {\n        clearInterval(this.interval);\n        this.setState({\n          finished: true\n        });\n      }\n    }\n  }, {\n    key: \"countCorrectSymbols\",\n    value: function countCorrectSymbols(userInput) {\n      var text = this.state.text.replace(' ', '');\n      return userInput.replace(' ', '').split('').filter(function (s, i) {\n        return s === text[i];\n      }).length;\n    }\n  }, {\n    key: \"setTimer\",\n    value: function setTimer() {\n      var _this2 = this;\n\n      if (!this.state.started) {\n        this.setState({\n          started: true\n        });\n        this.interval = setInterval(function () {\n          _this2.setState(function (prevProps) {\n            return {\n              sec: prevProps.sec + 1\n            };\n          });\n        }, 1000);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container mt-5 mb-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-6 offset-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Preview, {\n        text: this.state.text,\n        userInput: this.state.userInput,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"textarea\", {\n        value: this.state.userInput,\n        onChange: this.onUserInputChange,\n        className: \"form-control mb-3\",\n        placeholder: \"Start typing...\",\n        readOnly: this.state.finished,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Speed, {\n        sec: this.state.sec,\n        symbols: this.state.symbols,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-light\",\n        onClick: this.onRestart,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }\n      }, \"Restart\")))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/yusard/typing-test/src/App.js"],"names":["React","Component","Preview","Speed","getText","initialState","text","userInput","symbols","sec","started","finished","App","state","onRestart","setState","onUserInputChange","e","v","target","value","setTimer","onFinish","countCorrectSymbols","clearInterval","interval","replace","split","filter","s","i","length","setInterval","prevProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Preview from './Preview';\nimport Speed from './Speed';\nimport getText from './getText';\n\nconst initialState = {\n  text: getText(),\n  userInput: '',\n  symbols: 0,\n  sec: 0,\n  started: false,\n  finished: false\n}\n\nclass App extends Component {\n\n  state = initialState;\n\n  onRestart = () => {\n    this.setState(initialState)\n  }\n\n  onUserInputChange = (e) => {\n    const v = e.target.value;\n    this.setTimer();\n    this.onFinish(v)\n    this.setState({\n      userInput: v,\n      symbols: this.countCorrectSymbols(v)\n    })\n  }\n\n  onFinish(userInput) {\n    if (userInput === this.state.text) {\n      clearInterval(this.interval);\n      this.setState({\n        finished: true\n      })\n    }\n  }\n\n  countCorrectSymbols(userInput) {\n    const text = this.state.text.replace(' ', '');\n    return userInput.replace(' ', '').split('').filter((s,i) => s === text[i]).length;\n  }\n\n  setTimer() {\n    if (!this.state.started) {\n      this.setState({started: true});\n      this.interval = setInterval(() => {\n        this.setState(prevProps => {\n          return {sec: prevProps.sec + 1}\n        })\n      }, 1000)\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"container mt-5 mb-5\">\n        <div className=\"row\">\n          <div className=\"col-md-6 offset-md-3\">\n            <Preview text={this.state.text} userInput={this.state.userInput}/>\n            <textarea\n              value={this.state.userInput}\n              onChange={this.onUserInputChange}\n              className=\"form-control mb-3\"\n              placeholder=\"Start typing...\"\n              readOnly={this.state.finished}\n            ></textarea>\n            <Speed sec={this.state.sec} symbols={this.state.symbols}/>\n            <div className=\"text-right\">\n              <button className=\"btn btn-light\" onClick={this.onRestart}>Restart</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}